{%- liquid
  assign section_id = section.id
  assign layout_preset = section.settings.layout_preset | default: 'dino'
  assign full_width = section.settings.full_width
  assign radius = section.settings.radius | default: 24
  assign min_height_desktop = section.settings.min_height_desktop | default: 600
  assign min_height_mobile = section.settings.min_height_mobile | default: 500
  assign bg_mode = section.settings.bg_mode | default: 'image'
  assign bg_image_desktop = section.settings.bg_image_desktop
  assign bg_image_mobile = section.settings.bg_image_mobile
  assign bg_color_1 = section.settings.bg_color_1 | default: '#ffffff'
  assign bg_color_2 = section.settings.bg_color_2 | default: '#f0f0f0'
  assign gradient_angle = section.settings.gradient_angle | default: 90
  assign vignette_strength = section.settings.vignette_strength | default: 0
  assign top_tagline = section.settings.top_tagline
  assign primary_button_label = section.settings.primary_button_label
  assign primary_button_link = section.settings.primary_button_link
  assign secondary_button_label = section.settings.secondary_button_label
  assign secondary_button_link = section.settings.secondary_button_link
  assign button_style = section.settings.button_style | default: 'filled'
  assign display_word_1 = section.settings.display_word_1
  assign display_word_2 = section.settings.display_word_2
  assign display_word_1_mode = section.settings.display_word_1_mode | default: 'normal'
  assign display_words_color = section.settings.display_words_color | default: '#000000'
  assign display_words_opacity = section.settings.display_words_opacity | default: 20
  assign display_words_blur = section.settings.display_words_blur | default: 0
  assign display_words_x = section.settings.display_words_x | default: 50
  assign display_words_y = section.settings.display_words_y | default: 30
  assign hero_image = section.settings.hero_image
  assign hero_image_mobile = section.settings.hero_image_mobile
  assign hero_x = section.settings.hero_x | default: 50
  assign hero_y = section.settings.hero_y | default: 40
  assign hero_width_desktop = section.settings.hero_width_desktop | default: 400
  assign hero_width_mobile = section.settings.hero_width_mobile | default: 290
  assign hero_z = section.settings.hero_z | default: 5
  assign hero2_image = section.settings.hero2_image
  assign hero2_x = section.settings.hero2_x | default: 60
  assign hero2_y = section.settings.hero2_y | default: 50
  assign hero2_width_desktop = section.settings.hero2_width_desktop | default: 200
  assign hero2_width_mobile = section.settings.hero2_width_mobile | default: 160
  assign hero2_z = section.settings.hero2_z | default: 4
  assign floating_product_image = section.settings.floating_product_image
  assign float_x = section.settings.float_x | default: 80
  assign float_y = section.settings.float_y | default: 20
  assign float_width_desktop = section.settings.float_width_desktop | default: 240
  assign float_width_mobile = section.settings.float_width_mobile | default: 180
  assign float_z = section.settings.float_z | default: 6
  assign bottom_panel_bg = section.settings.bottom_panel_bg | default: '#ffffff'
  assign bottom_panel_opacity = section.settings.bottom_panel_opacity | default: 80
  assign bottom_panel_padding = section.settings.bottom_panel_padding | default: 40
  assign tile_gap = section.settings.tile_gap | default: 20
  assign tile_radius = section.settings.tile_radius | default: 12
  assign tiles = section.blocks | where: 'type', 'tile'
-%}

<section
  class="boo-storyboard boo-storyboard--{{ section_id }}"
  data-section-id="{{ section_id }}"
  data-layout-preset="{{ layout_preset }}"
>
  <div class="boo-storyboard__wrapper{% if full_width %} boo-storyboard__wrapper--full-width{% endif %}">
    <div class="boo-storyboard__container">
      {%- comment -%} Background layer {%- endcomment -%}
      <div class="boo-storyboard__background">
        {%- if bg_mode == 'image' -%}
          {%- if bg_image_desktop != blank -%}
            <img
              src="{{ bg_image_desktop | image_url: width: 1920 }}"
              srcset="{{ bg_image_desktop | image_url: width: 1920 }} 1x, {{ bg_image_desktop | image_url: width: 3840 }} 2x"
              alt=""
              class="boo-storyboard__bg-image boo-storyboard__bg-image--desktop"
              loading="lazy"
            >
          {%- endif -%}
          {%- if bg_image_mobile != blank -%}
            <img
              src="{{ bg_image_mobile | image_url: width: 750 }}"
              srcset="{{ bg_image_mobile | image_url: width: 750 }} 1x, {{ bg_image_mobile | image_url: width: 1500 }} 2x"
              alt=""
              class="boo-storyboard__bg-image boo-storyboard__bg-image--mobile"
              loading="lazy"
            >
          {%- endif -%}
        {%- elsif bg_mode == 'gradient' -%}
          <div class="boo-storyboard__bg-gradient"></div>
        {%- elsif bg_mode == 'solid' -%}
          <div class="boo-storyboard__bg-solid"></div>
        {%- endif -%}
      </div>

      {%- comment -%} Display words layer (behind hero) {%- endcomment -%}
      {%- if display_word_1 != blank or display_word_2 != blank -%}
        <div class="boo-storyboard__display-words">
          {%- if display_word_1 != blank -%}
            <span class="boo-storyboard__display-word boo-storyboard__display-word--1{% if display_word_1_mode == 'vertical' %} boo-storyboard__display-word--vertical{% endif %}">
              {{ display_word_1 }}
            </span>
          {%- endif -%}
          {%- if display_word_2 != blank -%}
            <span class="boo-storyboard__display-word boo-storyboard__display-word--2">
              {{ display_word_2 }}
            </span>
          {%- endif -%}
        </div>
      {%- endif -%}

      {%- comment -%} Content layer (buttons, tagline) {%- endcomment -%}
      <div class="boo-storyboard__content">
        {%- if top_tagline != blank -%}
          <div class="boo-storyboard__tagline">{{ top_tagline }}</div>
        {%- endif -%}
        <div class="boo-storyboard__buttons">
          {%- if primary_button_label != blank -%}
            <a
              href="{{ primary_button_link | default: '#' }}"
              class="boo-storyboard__button boo-storyboard__button--primary boo-storyboard__button--{{ button_style }}"
            >
              {{ primary_button_label }}
            </a>
          {%- endif -%}
          {%- if secondary_button_label != blank -%}
            <a
              href="{{ secondary_button_link | default: '#' }}"
              class="boo-storyboard__button boo-storyboard__button--secondary boo-storyboard__button--{{ button_style }}"
            >
              {{ secondary_button_label }}
            </a>
          {%- endif -%}
        </div>
      </div>

      {%- comment -%} Bottom panel with tiles {%- endcomment -%}
      {%- if tiles.size > 0 -%}
        <div class="boo-storyboard__bottom-panel">
          <div class="boo-storyboard__tiles">
            {%- for block in tiles -%}
              {%- liquid
                assign tile_span = block.settings.tile_span | default: 'half'
                assign tile_bg = block.settings.tile_bg | default: '#f5f5f5'
                assign tile_bg_opacity = block.settings.tile_bg_opacity | default: 100
                assign tile_title = block.settings.tile_title
                assign tile_text = block.settings.tile_text
                assign tile_align = block.settings.tile_align | default: 'left'
                assign tile_button_label = block.settings.tile_button_label
                assign tile_button_link = block.settings.tile_button_link
                assign tile_image = block.settings.tile_image
                assign tile_image_x = block.settings.tile_image_x | default: 50
                assign tile_image_y = block.settings.tile_image_y | default: 50
                assign tile_image_width = block.settings.tile_image_width | default: 150
                assign tile_image_rotate = block.settings.tile_image_rotate | default: 0
                assign tile_image_opacity = block.settings.tile_image_opacity | default: 100
                assign tile_image_overflow = block.settings.tile_image_overflow
              -%}
              <div
                class="boo-storyboard__tile boo-storyboard__tile--{{ tile_span }}"
                data-block-id="{{ block.id }}"
                {{ block.shopify_attributes }}
              >
                <div class="boo-storyboard__tile-inner">
                  {%- if tile_image != blank -%}
                    <div class="boo-storyboard__tile-image-wrapper{% if tile_image_overflow %} boo-storyboard__tile-image-wrapper--overflow{% endif %}">
                      <img
                        src="{{ tile_image | image_url: width: 400 }}"
                        srcset="{{ tile_image | image_url: width: 400 }} 1x, {{ tile_image | image_url: width: 800 }} 2x"
                        alt=""
                        class="boo-storyboard__tile-image"
                        loading="lazy"
                      >
                    </div>
                  {%- endif -%}
                  {%- if tile_title != blank or tile_text != blank or tile_button_label != blank -%}
                    <div class="boo-storyboard__tile-content boo-storyboard__tile-content--{{ tile_align }}">
                      {%- if tile_title != blank -%}
                        <h3 class="boo-storyboard__tile-title">{{ tile_title }}</h3>
                      {%- endif -%}
                      {%- if tile_text != blank -%}
                        <div class="boo-storyboard__tile-text">{{ tile_text }}</div>
                      {%- endif -%}
                      {%- if tile_button_label != blank -%}
                        <a
                          href="{{ tile_button_link | default: '#' }}"
                          class="boo-storyboard__tile-button"
                        >
                          {{ tile_button_label }}
                        </a>
                      {%- endif -%}
                    </div>
                  {%- endif -%}
                </div>
              </div>
            {%- endfor -%}
          </div>
        </div>
      {%- endif -%}
    </div>
    {%- comment -%} Floating hero images (outside container to allow overflow) {%- endcomment -%}
    {%- if hero_image != blank or hero2_image != blank or floating_product_image != blank -%}
      <div class="boo-storyboard__floating-layer">
        {%- if hero_image != blank -%}
          <img
            src="{{ hero_image | image_url: width: 800 }}"
            srcset="{{ hero_image | image_url: width: 800 }} 1x, {{ hero_image | image_url: width: 1600 }} 2x"
            alt=""
            class="boo-storyboard__hero boo-storyboard__hero--desktop"
            loading="lazy"
          >
          {%- if hero_image_mobile != blank -%}
            <img
              src="{{ hero_image_mobile | image_url: width: 600 }}"
              srcset="{{ hero_image_mobile | image_url: width: 600 }} 1x, {{ hero_image_mobile | image_url: width: 1200 }} 2x"
              alt=""
              class="boo-storyboard__hero boo-storyboard__hero--mobile"
              loading="lazy"
            >
          {%- endif -%}
        {%- endif -%}
        {%- if hero2_image != blank -%}
          <img
            src="{{ hero2_image | image_url: width: 600 }}"
            srcset="{{ hero2_image | image_url: width: 600 }} 1x, {{ hero2_image | image_url: width: 1200 }} 2x"
            alt=""
            class="boo-storyboard__hero2 boo-storyboard__hero2--desktop"
            loading="lazy"
          >
          <img
            src="{{ hero2_image | image_url: width: 450 }}"
            srcset="{{ hero2_image | image_url: width: 450 }} 1x, {{ hero2_image | image_url: width: 900 }} 2x"
            alt=""
            class="boo-storyboard__hero2 boo-storyboard__hero2--mobile"
            loading="lazy"
          >
        {%- endif -%}
        {%- if floating_product_image != blank -%}
          <img
            src="{{ floating_product_image | image_url: width: 500 }}"
            srcset="{{ floating_product_image | image_url: width: 500 }} 1x, {{ floating_product_image | image_url: width: 1000 }} 2x"
            alt=""
            class="boo-storyboard__floating-product boo-storyboard__floating-product--desktop"
            loading="lazy"
          >
          <img
            src="{{ floating_product_image | image_url: width: 400 }}"
            srcset="{{ floating_product_image | image_url: width: 400 }} 1x, {{ floating_product_image | image_url: width: 800 }} 2x"
            alt=""
            class="boo-storyboard__floating-product boo-storyboard__floating-product--mobile"
            loading="lazy"
          >
        {%- endif -%}
      </div>
    {%- endif -%}
  </div>
</section>

<style>
  .boo-storyboard--{{ section_id }} {
    --radius: {{ radius }}px;
    --min-height-desktop: {{ min_height_desktop }}px;
    --min-height-mobile: {{ min_height_mobile }}px;
    --display-words-x: {{ display_words_x }}%;
    --display-words-y: {{ display_words_y }}%;
    --display-words-color: {{ display_words_color }};
    --display-words-opacity: {{ display_words_opacity | divided_by: 100.0 }};
    --display-words-blur: {{ display_words_blur }}px;
    --hero-x: {{ hero_x }}%;
    --hero-y: {{ hero_y }}%;
    --hero-width-desktop: {{ hero_width_desktop }}px;
    --hero-width-mobile: {{ hero_width_mobile }}px;
    --hero-z: {{ hero_z }};
    --hero2-x: {{ hero2_x }}%;
    --hero2-y: {{ hero2_y }}%;
    --hero2-width-desktop: {{ hero2_width_desktop }}px;
    --hero2-width-mobile: {{ hero2_width_mobile }}px;
    --hero2-z: {{ hero2_z }};
    --float-x: {{ float_x }}%;
    --float-y: {{ float_y }}%;
    --float-width-desktop: {{ float_width_desktop }}px;
    --float-width-mobile: {{ float_width_mobile }}px;
    --float-z: {{ float_z }};
    --bottom-panel-bg: {{ bottom_panel_bg }};
    --bottom-panel-opacity: {{ bottom_panel_opacity | divided_by: 100.0 }};
    --bottom-panel-padding: {{ bottom_panel_padding }}px;
    --tile-gap: {{ tile_gap }}px;
    --tile-radius: {{ tile_radius }}px;
    --vignette-strength: {{ vignette_strength | divided_by: 100.0 }};
    --gradient-angle: {{ gradient_angle }}deg;
  }

  .boo-storyboard--{{ section_id }} {
    width: 100%;
    overflow: visible;
    padding: 0;
    margin: 0;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__wrapper {
    width: 100%;
    overflow: visible;
    padding: 0;
    margin: 0;
    position: relative;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__wrapper--full-width {
    max-width: 100%;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__wrapper:not(.boo-storyboard__wrapper--full-width) {
    max-width: 1200px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 20px;
    padding-right: 20px;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__wrapper:not(.boo-storyboard__wrapper--full-width) {
    position: relative;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__wrapper:not(.boo-storyboard__wrapper--full-width) .boo-storyboard__floating-layer {
    left: 20px;
    right: 20px;
    width: auto;
    margin: 0;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__container {
    position: relative;
    min-height: var(--min-height-desktop);
    border-radius: var(--radius);
    overflow: hidden;
    background: {{ bg_color_1 }};
    display: flex;
    flex-direction: column;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__background {
    position: absolute;
    inset: 0;
    z-index: 1;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__bg-image {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__bg-image--mobile {
    display: none;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__bg-gradient {
    position: absolute;
    inset: 0;
    background: linear-gradient(var(--gradient-angle), {{ bg_color_1 }}, {{ bg_color_2 }});
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__bg-solid {
    position: absolute;
    inset: 0;
    background: {{ bg_color_1 }};
  }

  {%- if bg_mode == 'image' and vignette_strength > 0 -%}
  .boo-storyboard--{{ section_id }} .boo-storyboard__container::after {
    content: '';
    position: absolute;
    inset: 0;
    z-index: 2;
    background: radial-gradient(circle at center, transparent 0%, rgba(0, 0, 0, var(--vignette-strength)) 100%);
    pointer-events: none;
  }
  {%- endif -%}

  .boo-storyboard--{{ section_id }} .boo-storyboard__display-words {
    position: absolute;
    left: var(--display-words-x);
    top: var(--display-words-y);
    transform: translate(-50%, -50%);
    z-index: 2;
    pointer-events: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5em;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__display-word {
    font-size: clamp(48px, 8vw, 120px);
    font-weight: 900;
    color: var(--display-words-color);
    opacity: var(--display-words-opacity);
    filter: blur(var(--display-words-blur));
    line-height: 1;
    white-space: nowrap;
    font-family: serif;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__display-word--vertical {
    writing-mode: vertical-rl;
    text-orientation: upright;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__content {
    position: relative;
    z-index: 3;
    padding: 40px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__tagline {
    font-size: 18px;
    font-weight: 500;
    text-align: center;
    color: #333;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__buttons {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__button {
    display: inline-block;
    padding: 10px 24px;
    border-radius: 9999px;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    text-decoration: none;
    transition: opacity 0.2s, transform 0.2s;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__button--filled {
    background: #000;
    color: #fff;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__button--glass {
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    color: #000;
    border: 1px solid rgba(255, 255, 255, 0.3);
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__button:hover {
    opacity: 0.8;
    transform: translateY(-1px);
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__floating-layer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 10;
    pointer-events: none;
    overflow: visible;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__hero,
  .boo-storyboard--{{ section_id }} .boo-storyboard__hero2,
  .boo-storyboard--{{ section_id }} .boo-storyboard__floating-product {
    position: absolute;
    pointer-events: none;
    object-fit: contain;
    object-position: center;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__hero--desktop {
    left: var(--hero-x);
    top: var(--hero-y);
    transform: translate(-50%, -50%);
    width: var(--hero-width-desktop);
    height: auto;
    z-index: var(--hero-z);
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__hero--mobile {
    display: none;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__hero2--desktop {
    left: var(--hero2-x);
    top: var(--hero2-y);
    transform: translate(-50%, -50%);
    width: var(--hero2-width-desktop);
    height: auto;
    z-index: var(--hero2-z);
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__hero2--mobile {
    display: none;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__floating-product--desktop {
    left: var(--float-x);
    top: var(--float-y);
    transform: translate(-50%, -50%);
    width: var(--float-width-desktop);
    height: auto;
    z-index: var(--float-z);
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__floating-product--mobile {
    display: none;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__bottom-panel {
    position: relative;
    z-index: 4;
    background: {{ bottom_panel_bg | color_modify: 'alpha', bottom_panel_opacity | divided_by: 100.0 }};
    padding: var(--bottom-panel-padding);
    margin-top: auto;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__tiles {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--tile-gap);
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__tile {
    position: relative;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__tile--full {
    grid-column: 1 / -1;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__tile-inner {
    position: relative;
    min-height: 200px;
    border-radius: var(--tile-radius);
    padding: 24px;
    overflow: hidden;
  }

  {%- for block in tiles -%}
    {%- liquid
      assign tile_bg = block.settings.tile_bg | default: '#f5f5f5'
      assign tile_bg_opacity = block.settings.tile_bg_opacity | default: 100
      assign tile_image_x = block.settings.tile_image_x | default: 50
      assign tile_image_y = block.settings.tile_image_y | default: 50
      assign tile_image_width = block.settings.tile_image_width | default: 150
      assign tile_image_rotate = block.settings.tile_image_rotate | default: 0
      assign tile_image_opacity = block.settings.tile_image_opacity | default: 100
    -%}
    .boo-storyboard--{{ section_id }} .boo-storyboard__tile[data-block-id="{{ block.id }}"] .boo-storyboard__tile-inner {
      background: rgba({{ tile_bg | color_extract: 'red' }}, {{ tile_bg | color_extract: 'green' }}, {{ tile_bg | color_extract: 'blue' }}, {{ tile_bg_opacity | divided_by: 100.0 }});
    }
    .boo-storyboard--{{ section_id }} .boo-storyboard__tile[data-block-id="{{ block.id }}"] .boo-storyboard__tile-image {
      position: absolute;
      left: {{ tile_image_x }}%;
      top: {{ tile_image_y }}%;
      transform: translate(-50%, -50%) rotate({{ tile_image_rotate }}deg);
      width: {{ tile_image_width }}px;
      height: auto;
      opacity: {{ tile_image_opacity | divided_by: 100.0 }};
    }
    .boo-storyboard--{{ section_id }} .boo-storyboard__tile[data-block-id="{{ block.id }}"] .boo-storyboard__tile-image-wrapper--overflow {
      overflow: visible;
    }
    .boo-storyboard--{{ section_id }} .boo-storyboard__tile[data-block-id="{{ block.id }}"] .boo-storyboard__tile-image-wrapper--overflow .boo-storyboard__tile-image {
      position: absolute;
    }
  {%- endfor -%}

  .boo-storyboard--{{ section_id }} .boo-storyboard__tile-image-wrapper {
    position: absolute;
    inset: 0;
    overflow: hidden;
    pointer-events: none;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__tile-content {
    position: relative;
    z-index: 2;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__tile-title {
    font-size: 20px;
    font-weight: 700;
    margin: 0 0 12px 0;
    line-height: 1.3;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__tile-text {
    font-size: 14px;
    line-height: 1.6;
    margin: 0 0 16px 0;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__tile-button {
    display: inline-block;
    padding: 8px 16px;
    background: #000;
    color: #fff;
    text-decoration: none;
    border-radius: 9999px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: opacity 0.2s;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__tile-button:hover {
    opacity: 0.8;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__tile-content--center {
    text-align: center;
  }

  .boo-storyboard--{{ section_id }} .boo-storyboard__tile-content--right {
    text-align: right;
  }

  @media (max-width: 749px) {
    .boo-storyboard--{{ section_id }} .boo-storyboard__container {
      min-height: var(--min-height-mobile);
    }

    .boo-storyboard--{{ section_id }} .boo-storyboard__bg-image--desktop {
      display: none;
    }

    .boo-storyboard--{{ section_id }} .boo-storyboard__bg-image--mobile {
      display: block;
    }

    .boo-storyboard--{{ section_id }} .boo-storyboard__hero--desktop {
      display: none;
    }

    .boo-storyboard--{{ section_id }} .boo-storyboard__hero--mobile {
      display: block;
      left: var(--hero-x);
      top: var(--hero-y);
      transform: translate(-50%, -50%);
      width: var(--hero-width-mobile);
      height: auto;
      z-index: var(--hero-z);
    }

    .boo-storyboard--{{ section_id }} .boo-storyboard__hero2--desktop {
      display: none;
    }

    .boo-storyboard--{{ section_id }} .boo-storyboard__hero2--mobile {
      display: block;
      left: var(--hero2-x);
      top: var(--hero2-y);
      transform: translate(-50%, -50%);
      width: var(--hero2-width-mobile);
      height: auto;
      z-index: var(--hero2-z);
    }

    .boo-storyboard--{{ section_id }} .boo-storyboard__floating-product--desktop {
      display: none;
    }

    .boo-storyboard--{{ section_id }} .boo-storyboard__floating-product--mobile {
      display: block;
      left: var(--float-x);
      top: var(--float-y);
      transform: translate(-50%, -50%);
      width: var(--float-width-mobile);
      height: auto;
      z-index: var(--float-z);
    }

    .boo-storyboard--{{ section_id }} .boo-storyboard__content {
      padding: 24px;
    }

    .boo-storyboard--{{ section_id }} .boo-storyboard__tiles {
      grid-template-columns: 1fr;
    }

    .boo-storyboard--{{ section_id }} .boo-storyboard__tile--full {
      grid-column: 1;
    }

    .boo-storyboard--{{ section_id }} .boo-storyboard__bottom-panel {
      padding: 24px;
    }

    .boo-storyboard--{{ section_id }} .boo-storyboard__wrapper:not(.boo-storyboard__wrapper--full-width) .boo-storyboard__floating-layer {
      left: 20px;
      right: 20px;
    }
  }
</style>

{% schema %}
{
  "name": "Boo Storyboard",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "select",
      "id": "layout_preset",
      "label": "Layout Preset",
      "options": [
        {
          "value": "dino",
          "label": "Dino"
        },
        {
          "value": "bunny",
          "label": "Bunny"
        },
        {
          "value": "shark",
          "label": "Shark"
        },
        {
          "value": "fox",
          "label": "Fox"
        },
        {
          "value": "griboo",
          "label": "Griboo"
        }
      ],
      "default": "dino",
      "info": "Choose a preset layout style"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full Width",
      "default": true
    },
    {
      "type": "range",
      "id": "radius",
      "label": "Border Radius",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "default": 24
    },
    {
      "type": "range",
      "id": "min_height_desktop",
      "label": "Min Height (Desktop)",
      "min": 400,
      "max": 1200,
      "step": 50,
      "unit": "px",
      "default": 600
    },
    {
      "type": "range",
      "id": "min_height_mobile",
      "label": "Min Height (Mobile)",
      "min": 300,
      "max": 800,
      "step": 50,
      "unit": "px",
      "default": 500
    },
    {
      "type": "header",
      "content": "Background"
    },
    {
      "type": "select",
      "id": "bg_mode",
      "label": "Background Mode",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "gradient",
          "label": "Gradient"
        },
        {
          "value": "solid",
          "label": "Solid Color"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "bg_image_desktop",
      "label": "Background Image (Desktop)"
    },
    {
      "type": "image_picker",
      "id": "bg_image_mobile",
      "label": "Background Image (Mobile)",
      "info": "Optional: Different image for mobile"
    },
    {
      "type": "color",
      "id": "bg_color_1",
      "label": "Background Color 1",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "bg_color_2",
      "label": "Background Color 2",
      "default": "#f0f0f0",
      "info": "Used for gradient"
    },
    {
      "type": "range",
      "id": "gradient_angle",
      "label": "Gradient Angle",
      "min": 0,
      "max": 180,
      "step": 5,
      "unit": "deg",
      "default": 90
    },
    {
      "type": "range",
      "id": "vignette_strength",
      "label": "Vignette Strength",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "%",
      "default": 0,
      "info": "Adds dark vignette overlay (image mode only)"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "top_tagline",
      "label": "Top Tagline"
    },
    {
      "type": "text",
      "id": "primary_button_label",
      "label": "Primary Button Label"
    },
    {
      "type": "url",
      "id": "primary_button_link",
      "label": "Primary Button Link"
    },
    {
      "type": "text",
      "id": "secondary_button_label",
      "label": "Secondary Button Label"
    },
    {
      "type": "url",
      "id": "secondary_button_link",
      "label": "Secondary Button Link"
    },
    {
      "type": "select",
      "id": "button_style",
      "label": "Button Style",
      "options": [
        {
          "value": "filled",
          "label": "Filled"
        },
        {
          "value": "glass",
          "label": "Glass"
        }
      ],
      "default": "filled"
    },
    {
      "type": "header",
      "content": "Display Words"
    },
    {
      "type": "text",
      "id": "display_word_1",
      "label": "Display Word 1",
      "default": "Dino"
    },
    {
      "type": "text",
      "id": "display_word_2",
      "label": "Display Word 2",
      "default": "Boo"
    },
    {
      "type": "select",
      "id": "display_word_1_mode",
      "label": "Display Word 1 Mode",
      "options": [
        {
          "value": "normal",
          "label": "Normal"
        },
        {
          "value": "vertical",
          "label": "Vertical"
        }
      ],
      "default": "normal"
    },
    {
      "type": "color",
      "id": "display_words_color",
      "label": "Display Words Color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "display_words_opacity",
      "label": "Display Words Opacity",
      "min": 5,
      "max": 60,
      "step": 5,
      "unit": "%",
      "default": 20
    },
    {
      "type": "range",
      "id": "display_words_blur",
      "label": "Display Words Blur",
      "min": 0,
      "max": 8,
      "step": 0.5,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "display_words_x",
      "label": "Display Words X Position",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 50
    },
    {
      "type": "range",
      "id": "display_words_y",
      "label": "Display Words Y Position",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 30
    },
    {
      "type": "header",
      "content": "Hero Image"
    },
    {
      "type": "image_picker",
      "id": "hero_image",
      "label": "Hero Image"
    },
    {
      "type": "image_picker",
      "id": "hero_image_mobile",
      "label": "Hero Image (Mobile)",
      "info": "Optional: Different hero image for mobile"
    },
    {
      "type": "range",
      "id": "hero_x",
      "label": "Hero X Position",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 50
    },
    {
      "type": "range",
      "id": "hero_y",
      "label": "Hero Y Position",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 40
    },
    {
      "type": "range",
      "id": "hero_width_desktop",
      "label": "Hero Width (Desktop)",
      "min": 200,
      "max": 800,
      "step": 20,
      "unit": "px",
      "default": 400
    },
    {
      "type": "range",
      "id": "hero_width_mobile",
      "label": "Hero Width (Mobile)",
      "min": 150,
      "max": 490,
      "step": 20,
      "unit": "px",
      "default": 290
    },
    {
      "type": "range",
      "id": "hero_z",
      "label": "Hero Z-Index",
      "min": 1,
      "max": 10,
      "step": 1,
      "default": 5
    },
    {
      "type": "header",
      "content": "Hero 2 Image (Optional)"
    },
    {
      "type": "image_picker",
      "id": "hero2_image",
      "label": "Hero 2 Image",
      "info": "For layouts with multiple hero characters (e.g., Fox with child)"
    },
    {
      "type": "range",
      "id": "hero2_x",
      "label": "Hero 2 X Position",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 60
    },
    {
      "type": "range",
      "id": "hero2_y",
      "label": "Hero 2 Y Position",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 50
    },
    {
      "type": "range",
      "id": "hero2_width_desktop",
      "label": "Hero 2 Width (Desktop)",
      "min": 100,
      "max": 500,
      "step": 20,
      "unit": "px",
      "default": 200
    },
    {
      "type": "range",
      "id": "hero2_width_mobile",
      "label": "Hero 2 Width (Mobile)",
      "min": 80,
      "max": 340,
      "step": 20,
      "unit": "px",
      "default": 160
    },
    {
      "type": "range",
      "id": "hero2_z",
      "label": "Hero 2 Z-Index",
      "min": 1,
      "max": 10,
      "step": 1,
      "default": 4
    },
    {
      "type": "header",
      "content": "Floating Product Image (Optional)"
    },
    {
      "type": "image_picker",
      "id": "floating_product_image",
      "label": "Floating Product Image",
      "info": "Optional product image that can overflow container (e.g., onesie)"
    },
    {
      "type": "range",
      "id": "float_x",
      "label": "Floating Product X Position",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 80
    },
    {
      "type": "range",
      "id": "float_y",
      "label": "Floating Product Y Position",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 20
    },
    {
      "type": "range",
      "id": "float_width_desktop",
      "label": "Floating Product Width (Desktop)",
      "min": 100,
      "max": 500,
      "step": 20,
      "unit": "px",
      "default": 240
    },
    {
      "type": "range",
      "id": "float_width_mobile",
      "label": "Floating Product Width (Mobile)",
      "min": 80,
      "max": 340,
      "step": 20,
      "unit": "px",
      "default": 180
    },
    {
      "type": "range",
      "id": "float_z",
      "label": "Floating Product Z-Index",
      "min": 1,
      "max": 10,
      "step": 1,
      "default": 6
    },
    {
      "type": "header",
      "content": "Bottom Panel"
    },
    {
      "type": "color",
      "id": "bottom_panel_bg",
      "label": "Bottom Panel Background",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "bottom_panel_opacity",
      "label": "Bottom Panel Opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "default": 80
    },
    {
      "type": "range",
      "id": "bottom_panel_padding",
      "label": "Bottom Panel Padding",
      "min": 20,
      "max": 80,
      "step": 5,
      "unit": "px",
      "default": 40
    },
    {
      "type": "range",
      "id": "tile_gap",
      "label": "Tile Gap",
      "min": 10,
      "max": 40,
      "step": 2,
      "unit": "px",
      "default": 20
    },
    {
      "type": "range",
      "id": "tile_radius",
      "label": "Tile Border Radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "default": 12
    }
  ],
  "blocks": [
    {
      "type": "tile",
      "name": "Tile",
      "settings": [
        {
          "type": "select",
          "id": "tile_span",
          "label": "Tile Span",
          "options": [
            {
              "value": "half",
              "label": "Half (1 column)"
            },
            {
              "value": "full",
              "label": "Full (2 columns)"
            }
          ],
          "default": "half"
        },
        {
          "type": "color",
          "id": "tile_bg",
          "label": "Tile Background",
          "default": "#f5f5f5"
        },
        {
          "type": "range",
          "id": "tile_bg_opacity",
          "label": "Tile Background Opacity",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "%",
          "default": 100
        },
        {
          "type": "text",
          "id": "tile_title",
          "label": "Tile Title"
        },
        {
          "type": "textarea",
          "id": "tile_text",
          "label": "Tile Text"
        },
        {
          "type": "select",
          "id": "tile_align",
          "label": "Tile Text Alignment",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ],
          "default": "left"
        },
        {
          "type": "text",
          "id": "tile_button_label",
          "label": "Tile Button Label"
        },
        {
          "type": "url",
          "id": "tile_button_link",
          "label": "Tile Button Link"
        },
        {
          "type": "header",
          "content": "Tile Image"
        },
        {
          "type": "image_picker",
          "id": "tile_image",
          "label": "Tile Image",
          "info": "Optional image for tile"
        },
        {
          "type": "range",
          "id": "tile_image_x",
          "label": "Tile Image X Position",
          "min": 0,
          "max": 100,
          "step": 1,
          "unit": "%",
          "default": 50
        },
        {
          "type": "range",
          "id": "tile_image_y",
          "label": "Tile Image Y Position",
          "min": 0,
          "max": 100,
      "step": 1,
          "unit": "%",
          "default": 50
        },
        {
          "type": "range",
          "id": "tile_image_width",
          "label": "Tile Image Width",
          "min": 50,
          "max": 400,
          "step": 10,
          "unit": "px",
          "default": 150
        },
        {
          "type": "range",
          "id": "tile_image_rotate",
          "label": "Tile Image Rotation",
          "min": -25,
          "max": 25,
          "step": 1,
          "unit": "deg",
          "default": 0
        },
        {
          "type": "range",
          "id": "tile_image_opacity",
          "label": "Tile Image Opacity",
          "min": 10,
          "max": 100,
          "step": 5,
          "unit": "%",
          "default": 100
        },
        {
          "type": "checkbox",
          "id": "tile_image_overflow",
          "label": "Allow Image Overflow",
          "default": false,
          "info": "Allow tile image to extend outside tile bounds (e.g., for fins)"
        }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "Boo Storyboard — Dino",
      "blocks": [
        {
          "type": "tile",
          "settings": {
            "tile_span": "full",
            "tile_title": "Dino Collection",
            "tile_text": "Explore our dinosaur-themed collection",
            "tile_align": "left"
          }
        },
        {
          "type": "tile",
          "settings": {
            "tile_span": "half",
            "tile_title": "Featured",
            "tile_text": "New arrivals",
            "tile_align": "center"
          }
        },
        {
          "type": "tile",
          "settings": {
            "tile_span": "half",
            "tile_title": "Sale",
            "tile_text": "Special offers",
            "tile_align": "center"
          }
        }
      ]
    },
    {
      "name": "Boo Storyboard — Bunny",
      "blocks": [
        {
          "type": "tile",
          "settings": {
            "tile_span": "half",
            "tile_title": "Bunny Collection",
            "tile_text": "Hop into style",
            "tile_align": "left"
          }
        },
        {
          "type": "tile",
          "settings": {
            "tile_span": "half",
            "tile_title": "New Arrivals",
            "tile_text": "Check out the latest",
            "tile_align": "left"
          }
        }
      ]
    },
    {
      "name": "Boo Storyboard — Shark",
      "blocks": [
        {
          "type": "tile",
          "settings": {
            "tile_span": "half",
            "tile_title": "Shark Collection",
            "tile_text": "Dive into adventure",
            "tile_align": "left",
            "tile_image_overflow": true
          }
        },
        {
          "type": "tile",
          "settings": {
            "tile_span": "half",
            "tile_title": "Featured",
            "tile_text": "Best sellers",
            "tile_align": "left",
            "tile_image_overflow": true
          }
        }
      ]
    },
    {
      "name": "Boo Storyboard — Fox",
      "blocks": [
        {
          "type": "tile",
          "settings": {
            "tile_span": "half",
            "tile_title": "Fox Collection",
            "tile_text": "Cunning style",
            "tile_align": "left"
          }
        },
        {
          "type": "tile",
          "settings": {
            "tile_span": "half",
            "tile_title": "Family Set",
            "tile_text": "Perfect for the whole family",
            "tile_align": "left"
          }
        }
      ]
    },
    {
      "name": "Boo Storyboard — Griboo",
      "blocks": [
        {
          "type": "tile",
          "settings": {
            "tile_span": "half",
            "tile_title": "Griboo Collection",
            "tile_text": "Unique designs",
            "tile_align": "left"
          }
        },
        {
          "type": "tile",
          "settings": {
            "tile_span": "half",
            "tile_title": "Featured",
            "tile_text": "Special collection",
            "tile_align": "left"
          }
        }
      ]
    }
  ]
}
{% endschema %}

