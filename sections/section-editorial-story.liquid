{%- liquid
  assign section_id = section.id
  assign heading = section.settings.heading
  assign rich_text = section.settings.rich_text
  assign image = section.settings.image
  assign image_position = section.settings.image_position
  assign bg_color = section.settings.background_color
  assign padding_top = section.settings.padding_top
  assign padding_bottom = section.settings.padding_bottom
-%}

{%- style -%}
  .editorial-story-{{ section_id }} {
    background-color: {{ bg_color }};
    padding-top: {{ padding_top | times: 0.5 | round: 0 }}px;
    padding-bottom: {{ padding_bottom | times: 0.5 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .editorial-story-{{ section_id }} {
      padding-top: {{ padding_top }}px;
      padding-bottom: {{ padding_bottom }}px;
    }
  }

  .editorial-story-{{ section_id }}__container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
  }

  .editorial-story-{{ section_id }}__grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 3rem;
    align-items: center;
  }

  @media screen and (max-width: 768px) {
    .editorial-story-{{ section_id }}__container {
      padding: 0 1.5rem;
      width: 100%;
      max-width: 100%;
      overflow-x: hidden;
    }

    .editorial-story-{{ section_id }}__grid {
      gap: 2rem;
      display: flex;
      flex-direction: column;
    }

    .editorial-story-{{ section_id }}__image-wrapper {
      width: 100%;
      max-width: 100%;
      aspect-ratio: 4 / 5;
      margin: 0;
    }

    .editorial-story-{{ section_id }}__image {
      width: 100%;
      max-width: 100%;
      height: auto;
      object-fit: cover;
    }
  }

  @media screen and (min-width: 990px) {
    .editorial-story-{{ section_id }}__grid {
      grid-template-columns: {% if image_position == 'right' %}1fr 1fr{% else %}1fr 1fr{% endif %};
      gap: 4rem;
    }

    .editorial-story-{{ section_id }}__grid--reversed {
      direction: rtl;
    }

    .editorial-story-{{ section_id }}__grid--reversed > * {
      direction: ltr;
    }
  }

  .editorial-story-{{ section_id }}__content {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .editorial-story-{{ section_id }}__heading {
    margin: 0;
    font-size: 2.5rem;
    font-weight: 700;
    line-height: 1.2;
    letter-spacing: -0.02em;
    color: {{ section.settings.text_color }};
  }

  .editorial-story-{{ section_id }}__text {
    font-size: 1.125rem;
    line-height: 1.7;
    color: {{ section.settings.text_color }};
    opacity: 0.85;
  }

  @media screen and (max-width: 768px) {
    .editorial-story-{{ section_id }}__heading {
      font-size: 1.75rem;
      line-height: 1.25;
    }

    .editorial-story-{{ section_id }}__text {
      font-size: 1rem;
      line-height: 1.6;
    }
  }

  .editorial-story-{{ section_id }}__text p {
    margin: 0 0 1.5rem 0;
  }

  .editorial-story-{{ section_id }}__text p:last-child {
    margin-bottom: 0;
  }

  .editorial-story-{{ section_id }}__image-wrapper {
    position: relative;
    width: 100%;
    aspect-ratio: 4 / 5;
    overflow: hidden;
    border-radius: 12px;
  }

  .editorial-story-{{ section_id }}__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  @media screen and (max-width: 989px) {
    .editorial-story-{{ section_id }}__grid {
      {% if image_position == 'right' %}
        order: -1;
      {% endif %}
    }
  }
{%- endstyle -%}

<section class="editorial-story-{{ section_id }}" data-section-id="{{ section.id }}">
  <div class="editorial-story-{{ section_id }}__container">
    <div class="editorial-story-{{ section_id }}__grid {% if image_position == 'right' %}editorial-story-{{ section_id }}__grid--reversed{% endif %}">
      <div class="editorial-story-{{ section_id }}__content">
        {%- if heading != blank -%}
          <h2 class="editorial-story-{{ section_id }}__heading">{{ heading }}</h2>
        {%- endif -%}

        {%- if rich_text != blank -%}
          <div class="editorial-story-{{ section_id }}__text">
            {{ rich_text }}
          </div>
        {%- endif -%}
      </div>

      {%- if image != blank -%}
        <div class="editorial-story-{{ section_id }}__image-wrapper">
          {%- assign image_class = 'editorial-story-' | append: section_id | append: '__image' -%}
          {%- assign image_alt = heading | default: 'Editorial story image' -%}
          {{ image | image_url: width: 800 | image_tag: loading: 'lazy', alt: image_alt, class: image_class }}
        </div>
      {%- endif -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Editorial Brand Story",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Our Story"
    },
    {
      "type": "richtext",
      "id": "rich_text",
      "label": "Content"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Image Position",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "right"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Section Padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Padding Top",
      "default": 80
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 80
    }
  ],
  "presets": [
    {
      "name": "Editorial Brand Story"
    }
  ]
}
{% endschema %}

