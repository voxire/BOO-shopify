{% assign sid = section.id | replace: '_', '' | downcase %}

{% style %}
/* ===== ANIMATED GAMING STYLE ===== */
.scg-heading-wrapper {
  text-align: center;
  padding: 50px 20px 40px;
  position: relative;
  overflow: hidden;
}

.scg-main-heading {
  font-size: clamp(2.5rem, 6vw, 4.5rem);
  font-weight: 900;
  margin: 0 0 15px 0;
  background: linear-gradient(90deg, 
    #ff3366 0%, 
    #ff9933 25%, 
    #33ff66 50%, 
    #3366ff 75%, 
    #cc33ff 100%);
  background-size: 300% 300%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  letter-spacing: -0.5px;
  line-height: 1;
  text-transform: uppercase;
  position: relative;
  animation: gradient-shift 4s ease infinite, 
             text-glow 2s ease-in-out infinite alternate;
  text-shadow: 0 0 30px rgba(255, 51, 102, 0.3);
  font-family: 'Inter', sans-serif;
}

@keyframes gradient-shift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

@keyframes text-glow {
  from { text-shadow: 0 0 30px rgba(255, 51, 102, 0.3), 
                      0 0 60px rgba(51, 102, 255, 0.2); }
  to { text-shadow: 0 0 40px rgba(255, 51, 102, 0.5), 
                    0 0 80px rgba(51, 102, 255, 0.3),
                    0 0 100px rgba(204, 51, 255, 0.2); }
}

.scg-main-heading::before,
.scg-main-heading::after {
  content: 'âœ¦';
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 1.8rem;
  opacity: 0.7;
  animation: sparkle 2s infinite;
}

.scg-main-heading::before {
  left: -50px;
  animation-delay: 0.5s;
}

.scg-main-heading::after {
  right: -50px;
  animation-delay: 1s;
}

@keyframes sparkle {
  0%, 100% { opacity: 0.3; transform: translateY(-50%) scale(0.8); }
  50% { opacity: 1; transform: translateY(-50%) scale(1.2); }
}

.scg-subheading {
  font-size: clamp(1.1rem, 2.5vw, 1.4rem);
  color: #111; /* Solid dark color */
  margin: 0;
  font-weight: 600;
  letter-spacing: 2px;
  text-transform: uppercase;
  position: relative;
  display: inline-block;
  padding: 10px 25px;
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 50px;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.2),
    0 0 20px rgba(255, 255, 255, 0.5) inset;
  text-shadow: 0 3px 5px rgba(255, 255, 255, 0.8);
  animation: pulse-border 3s infinite;
}

@keyframes pulse-border {
  0%, 100% { border-color: rgba(255,255,255,0.3); }
  50% { border-color: rgba(255, 51, 102, 0.6); }
}

/* Decorative background elements */
.scg-heading-wrapper::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 400px;
  height: 400px;
  background: radial-gradient(circle, 
    rgba(255,51,102,0.1) 0%,
    rgba(51,102,255,0.05) 40%,
    transparent 70%);
  z-index: -1;
  animation: pulse 6s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 0.5; transform: translate(-50%, -50%) scale(0.8); }
  50% { opacity: 0.8; transform: translate(-50%, -50%) scale(1.2); }
}

.scg-{{ sid }}__wrap {
  padding-top: 0 !important;
  position: relative;
  z-index: 2;
}
/* ===== END GAMING STYLE ===== */
  #shopify-section-{{ section.id }},
  #shopify-section-{{ section.id }} *{
    box-sizing:border-box;
  }
  #shopify-section-{{ section.id }}{
    background: {{ section.settings.section_bg }} !important;
    margin:0 !important;
    padding:0 !important;
  }
  #shopify-section-{{ section.id }} .page-width{
    max-width:none !important;
    padding:0 !important;
  }
  #shopify-section-{{ section.id }} .gradient,
  #shopify-section-{{ section.id }} .color-background-1,
  #shopify-section-{{ section.id }} .color-background-2{
    background: transparent !important;
  }

  /* section */
  .scg-{{ sid }}{
    width:100%;
    background: {{ section.settings.section_bg }};
    margin:0;
    padding:0;
  }

  /* grid centered in the section */
  .scg-{{ sid }}__wrap{
    width:100%;
    max-width:{{ section.settings.max_width }}px;
    margin:0 auto;
    padding:{{ section.settings.outer_padding }}px;
    min-height:{{ section.settings.height_vh }}vh;
    display:grid;
    grid-template-columns:repeat({{ section.settings.columns }}, minmax(0,1fr));
    gap:{{ section.settings.gap }}px;
    align-content:center;
  }

  /* allow hover in editor */
  .scg-{{ sid }}__tile,.scg-{{ sid }}__tile *{pointer-events:auto}
  .scg-{{ sid }}__tile .shopify-section,
  .scg-{{ sid }}__tile [data-shopify-editor-section],
  .scg-{{ sid }}__tile [data-shopify-editor-block],
  .scg-{{ sid }}__tile .shopify-block,
  .scg-{{ sid }}__tile .shopify-section__block{pointer-events:none}

  /* tiles */
  .scg-{{ sid }}__tile{
    position:relative;
    overflow:hidden;
    display:block;
    text-decoration:none;
    height:{{ section.settings.tile_h }}px;
    border-radius:{{ section.settings.radius }}px;
    box-shadow:0 18px 45px rgba(0,0,0,.14);
    transition:filter .35s ease,opacity .35s ease,transform .35s ease;
    background: {{ section.settings.tile_bg }};
  }

  /* media fills tile */
  .scg-{{ sid }}__media{
    position:absolute;
    inset:0;
    z-index:0;
  }
  .scg-{{ sid }}__media img{
    width:100%;
    height:100%;
    display:block;
    object-fit:{{ section.settings.image_fit }};
    object-position:{{ section.settings.image_pos_x }}% {{ section.settings.image_pos_y }}%;
    transform:scale({{ section.settings.image_scale | divided_by: 100.0 }});
    transition:transform .5s ease;
  }

  /* overlay */
  .scg-{{ sid }}__overlay{
    position:absolute;inset:0;z-index:1;
    background:linear-gradient(
      180deg,
      rgba(0,0,0,0) 20%,
      rgba(0,0,0,{{ section.settings.overlay_opacity | divided_by: 100.0 }}) 100%
    );
    opacity:{{ section.settings.overlay_opacity | divided_by: 100.0 }};
    transition:opacity .35s ease;
  }

  /* hover vertical text */
  .scg-{{ sid }}__hover-text{
    position:absolute;
    right:18px;
    bottom:18px;
    writing-mode:vertical-rl;
    transform:rotate(180deg);
    font-size:22px;
    font-weight:900;
    letter-spacing:2px;
    color:var(--scg-text);
    opacity:0;
    transition:opacity .3s ease;
    z-index:3;
    pointer-events:none;
  }

  /* === Smooth hover system (no :has) === */
  .scg-{{ sid }}__wrap {
    /* helps isolate paint work */
    contain: layout paint style;
  }

  .scg-{{ sid }}__tile {
    will-change: transform, opacity;
    transform: translateZ(0);
    backface-visibility: hidden;
  }

  .scg-{{ sid }}__media {
    will-change: transform, filter;
    transform: translateZ(0);
  }

  .scg-{{ sid }}__media img {
    will-change: transform, filter;
    transform: translateZ(0);
  }

  /* Active tile hover effects */
  .scg-{{ sid }}__tile.scg-is-active .scg-{{ sid }}__hover-text{opacity:1}
  .scg-{{ sid }}__tile.scg-is-active .scg-{{ sid }}__overlay{opacity:{{ section.settings.overlay_hover_opacity | divided_by: 100.0 }}}
  .scg-{{ sid }}__tile.scg-is-active .scg-{{ sid }}__media img{
    transform:scale({{ section.settings.image_scale | divided_by: 100.0 }}) scale({{ section.settings.hover_zoom | divided_by: 100.0 }});
  }

  /* When hovering any tile (JS adds .scg-is-hovering on wrap) */
  .scg-{{ sid }}__wrap.scg-is-hovering .scg-{{ sid }}__tile {
    opacity: 0.55;
    transform: translateZ(0) scale(0.985);
  }

  /* Blur ONLY the image layer of non-active tiles (much faster than blurring the whole card) */
  .scg-{{ sid }}__wrap.scg-is-hovering .scg-{{ sid }}__tile:not(.scg-is-active) .scg-{{ sid }}__media img {
    filter: blur(5px);
  }

  /* Active tile pops */
  .scg-{{ sid }}__wrap.scg-is-hovering .scg-{{ sid }}__tile.scg-is-active {
    opacity: 1;
    transform: translateY(-14px) scale(1.03) translateZ(0);
    z-index: 3;
  }

  /* Show hover text only on active tile */
  .scg-{{ sid }}__wrap.scg-is-hovering .scg-{{ sid }}__tile:not(.scg-is-active) .scg-{{ sid }}__hover-text {
    opacity: 0;
  }
  .scg-{{ sid }}__wrap.scg-is-hovering .scg-{{ sid }}__tile.scg-is-active .scg-{{ sid }}__hover-text {
    opacity: 1;
  }

  /* Optional: reduce motion for accessibility */
  @media (prefers-reduced-motion: reduce) {
    .scg-{{ sid }}__tile,
    .scg-{{ sid }}__media img {
      transition: none !important;
    }
    .scg-{{ sid }}__wrap.scg-is-hovering .scg-{{ sid }}__tile:not(.scg-is-active) .scg-{{ sid }}__media img {
      filter: none !important;
    }
  }

  /* Disable blur interaction on touch devices (no hover) */
  @media (hover: none) {
    .scg-{{ sid }}__wrap.scg-is-hovering .scg-{{ sid }}__tile {
      opacity: 1;
      transform: none;
    }
    .scg-{{ sid }}__wrap.scg-is-hovering .scg-{{ sid }}__tile:not(.scg-is-active) .scg-{{ sid }}__media img {
      filter: none;
    }
  }

    /* ===== MOBILE CAROUSEL - HIDDEN BY DEFAULT ===== */
.scg-mobile-carousel {
  display: none; /* Hidden on desktop */
  width: 100%;
  overflow: hidden;
  position: relative;
  padding: 20px 0 40px;
}

.scg-carousel__container {
  display: flex;
  transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  gap: 0;
  padding: 0;
  width: 100%;
  -webkit-overflow-scrolling: touch; /* Better mobile scrolling */
}
.scg-carousel__container * {
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

.scg-carousel__slide {
  flex: 0 0 100%;
  min-width: 100%;
  flex-shrink: 0;
  will-change: transform; /* Optimize animations */
}

.scg-carousel__link {
  position: relative;
  display: block;
  margin: 0 15px;
  height: {{ section.settings.tile_h_mobile }}px;
  text-decoration: none;
  border-radius: {{ section.settings.radius }}px;
  box-shadow: 0 10px 30px rgba(0,0,0,.2);
  background: {{ section.settings.tile_bg }};
  overflow: hidden;
}


.scg-carousel__media {
  position: absolute;
  inset: 0;
  z-index: 0;
}

.scg-carousel__media img {
  width: 100% !important;
  height: 100% !important;
  display: block !important;
  object-fit: cover !important;
  object-position: center 30% !important; /* Focus on top part of image */
  background: {{ section.settings.tile_bg }};
  transition: transform 0.5s ease;
}

.scg-carousel__link:hover .scg-carousel__media img {
  transform: scale(1.05);
}

.scg-carousel__overlay {
  position: absolute;
  inset: 0;
  z-index: 1;
  background: linear-gradient(
    180deg,
    rgba(0,0,0,0) 20%,
    rgba(0,0,0,0.6) 100%
  );
}

.scg-carousel__title {
  position: absolute;
  bottom: 20px;
  left: 20px;
  right: 20px;
  font-size: 18px;
  font-weight: 700;
  color: #fff;
  z-index: 3;
  text-align: center;
  text-shadow: 0 2px 4px rgba(0,0,0,0.5);
}

.scg-carousel__dots {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin-top: 20px;
}

.scg-carousel__dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: rgba(0,0,0,0.2);
  cursor: pointer;
  transition: background 0.3s ease;
}

.scg-carousel__dot.active {
  background: #ff3366;
  transform: scale(1.2);
}

  @media (max-width:989px){
  /* HIDE the desktop grid on mobile */
  .scg-{{ sid }}__wrap {
    display: none !important;
  }
  
  /* SHOW the mobile carousel on mobile */
  .scg-mobile-carousel {
    display: block !important;
  }
  
  /* Hover effects disabled on mobile via @media (hover: none) rule above */
}


{% endstyle %}

<section class="scg-{{ sid }}">
  <div class="scg-heading-wrapper">
    <h2 class="scg-main-heading">Choose Your Character</h2>
    <p class="scg-subheading">Select from our exclusive collection of personalities</p>
  </div>

  {% comment %} Mobile View {% endcomment %}

  <!-- ADD THIS NEW MOBILE-ONLY CAROUSEL -->
<div class="scg-mobile-carousel">
  <div class="scg-carousel__container">
    {% for block in section.blocks %}
      {% assign p = block.settings.product %}
      {% assign img = block.settings.custom_image %}
      {% if p %}
        <div class="scg-carousel__slide">
          <a
            href="{{ p.url }}"
            class="scg-carousel__link"
            style="--scg-text: {{ block.settings.text_color }};"
            {{ block.shopify_attributes }}
          >
            <div class="scg-carousel__media">
              {% if img %}
                <img src="{{ img | image_url: width: 800 }}" loading="lazy" decoding="async" alt="{{ p.title }}">
              {% elsif p.featured_image %}
                <img src="{{ p.featured_image | image_url: width: 800 }}" loading="lazy" decoding="async" alt="{{ p.title }}">
              {% endif %}
            </div>
            <div class="scg-carousel__overlay"></div>
            <span class="scg-carousel__title">
              {% if p.metafields.custom.pgc_middle_text and p.metafields.custom.pgc_middle_text.value != blank %}
                {{ p.metafields.custom.pgc_middle_text.value }}
              {% else %}
                {{ p.title }}
              {% endif %}
            </span>
          </a>
        </div>
      {% endif %}
    {% endfor %}
  </div>
  <div class="scg-carousel__dots"></div>
</div>

  {% comment %} Desktop View {% endcomment %}
  <div class="scg-{{ sid }}__wrap">
    {% for block in section.blocks %}
      {% assign p = block.settings.product %}
      {% assign img = block.settings.custom_image %}
      {% if p %}
        <a
          href="{{ p.url }}"
          class="scg-{{ sid }}__tile"
          style="--scg-text: {{ block.settings.text_color }};"
          {{ block.shopify_attributes }}
        >
          <div class="scg-{{ sid }}__media" aria-hidden="true">
            {% if img %}
              <img src="{{ img | image_url: width: 1600 }}" alt="" loading="lazy" decoding="async">
            {% elsif p.featured_image %}
              <img src="{{ p.featured_image | image_url: width: 1600 }}" alt="" loading="lazy" decoding="async">
            {% endif %}
          </div>

          <div class="scg-{{ sid }}__overlay" aria-hidden="true"></div>

          <span class="scg-{{ sid }}__hover-text">
            {% if p.metafields.custom.pgc_middle_text and p.metafields.custom.pgc_middle_text.value != blank %}
              {{ p.metafields.custom.pgc_middle_text.value }}
            {% else %}
              {{ p.title }}
            {% endif %}
          </span>
        </a>
      {% endif %}
    {% endfor %}
  </div>
  <script>
document.addEventListener('DOMContentLoaded', function() {
  const carousel = document.querySelector('.scg-mobile-carousel');
  if (!carousel) return;
  
  const isMobile = window.matchMedia('(max-width: 989px)').matches;
  if (!isMobile) return;
  
  const container = carousel.querySelector('.scg-carousel__container');
  const slides = carousel.querySelectorAll('.scg-carousel__slide');
  const dotsContainer = carousel.querySelector('.scg-carousel__dots');
  
  if (!slides.length || slides.length < 2) return;
  
  let currentIndex = 0;
  let startX = 0;
  let currentX = 0;
  let isDragging = false;
  let autoSlideInterval;
  let isAnimating = false;
  
  // Create dots
  dotsContainer.innerHTML = '';
  slides.forEach((_, index) => {
    const dot = document.createElement('div');
    dot.className = 'scg-carousel__dot';
    if (index === 0) dot.classList.add('active');
    dot.addEventListener('click', () => goToSlide(index));
    dotsContainer.appendChild(dot);
  });
  
  function updateCarousel(instant = false, targetIndex = null) {
    if (isAnimating && !instant) return;
    
    const slideWidth = slides[0].offsetWidth;
    const effectiveIndex = targetIndex !== null ? targetIndex : currentIndex;
    
    if (!instant) isAnimating = true;
    
    container.style.transition = instant ? 'none' : 'transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
    container.style.transform = `translateX(-${effectiveIndex * slideWidth}px)`;
    
    // Update dots with actual currentIndex (not effectiveIndex for edge cases)
    dotsContainer.querySelectorAll('.scg-carousel__dot').forEach((dot, index) => {
      dot.classList.toggle('active', index === currentIndex);
    });
    
    // Reset animation flag
    if (!instant) {
      setTimeout(() => {
        isAnimating = false;
        
        // Handle edge jumps AFTER animation completes
        if (effectiveIndex === -1) {
          // Special case: showing "clone" of last before first
          container.style.transition = 'none';
          container.style.transform = `translateX(-${(slides.length - 1) * slideWidth}px)`;
          currentIndex = slides.length - 1;
          updateCarousel(true); // Update dots immediately
        } else if (effectiveIndex === slides.length) {
          // Special case: showing "clone" of first after last
          container.style.transition = 'none';
          container.style.transform = `translateX(0px)`;
          currentIndex = 0;
          updateCarousel(true); // Update dots immediately
        }
      }, 500);
    }
  }
  
  function goToSlide(index, instant = false) {
    if (isAnimating && !instant) return;
    
    currentIndex = index;
    
    // Handle infinite edges
    if (index < 0) {
      // Going left from first: show "clone" of last at position -1
      const slideWidth = slides[0].offsetWidth;
      container.style.transition = 'transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
      container.style.transform = `translateX(${slideWidth}px)`; // Shows last slide to the right
      currentIndex = slides.length - 1; // Will update after animation
      updateCarousel(false, -1); // Animate to position -1
    } else if (index >= slides.length) {
      // Going right from last: show "clone" of first at position length
      const slideWidth = slides[0].offsetWidth;
      container.style.transition = 'transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
      container.style.transform = `translateX(-${(slides.length - 1) * slideWidth}px)`; // Shows first slide to the left
      currentIndex = 0; // Will update after animation
      updateCarousel(false, slides.length); // Animate to position length
    } else {
      // Normal movement
      updateCarousel(instant);
    }
  }
  
  function nextSlide() {
    goToSlide(currentIndex + 1);
  }
  
  function prevSlide() {
    goToSlide(currentIndex - 1);
  }
  
  // SWIPE HANDLING - SIMPLIFIED
  container.addEventListener('touchstart', (e) => {
    if (isAnimating) return;
    startX = e.touches[0].clientX;
    isDragging = true;
    container.style.transition = 'none';
    clearInterval(autoSlideInterval);
  });
  
  container.addEventListener('touchmove', (e) => {
    if (!isDragging || isAnimating) return;
    e.preventDefault();
    
    const x = e.touches[0].clientX;
    const diff = x - startX;
    const slideWidth = slides[0].offsetWidth;
    
    // Calculate drag position with bounds
    let dragOffset = (-currentIndex * slideWidth) + diff;
    
    // Allow slight overflow for infinite feel (50px)
    const minDrag = -((slides.length) * slideWidth) + 50;
    const maxDrag = 50;
    
    if (dragOffset > maxDrag) dragOffset = maxDrag;
    if (dragOffset < minDrag) dragOffset = minDrag;
    
    container.style.transform = `translateX(${dragOffset}px)`;
  });
  
  container.addEventListener('touchend', (e) => {
    if (!isDragging || isAnimating) return;
    isDragging = false;
    
    const endX = e.changedTouches[0].clientX;
    const diff = startX - endX;
    const slideWidth = slides[0].offsetWidth;
    const threshold = slideWidth * 0.2; // 20% threshold
    
    if (Math.abs(diff) > threshold) {
      if (diff > 0) {
        // Swipe left = next
        nextSlide();
      } else {
        // Swipe right = previous
        prevSlide();
      }
    } else {
      // Not enough swipe, snap back
      updateCarousel();
    }
    
    startAutoSlide();
  });
  
  // Add CSS for smoother edges
  const style = document.createElement('style');
  style.textContent = `
    .scg-carousel__container {
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }
    .scg-carousel__container::-webkit-scrollbar {
      display: none;
    }
  `;
  document.head.appendChild(style);
  
  function startAutoSlide() {
    clearInterval(autoSlideInterval);
    autoSlideInterval = setInterval(() => {
      if (!isDragging && !isAnimating) {
        nextSlide();
      }
    }, 5000);
  }
  
  // Pause on hover
  container.addEventListener('mouseenter', () => clearInterval(autoSlideInterval));
  container.addEventListener('mouseleave', startAutoSlide);
  
  // Initialize
  updateCarousel(true);
  startAutoSlide();
  
  // Handle resize
  window.addEventListener('resize', function() {
    if (window.matchMedia('(max-width: 989px)').matches) {
      updateCarousel(true);
    }
  });
});
</script>

<script>
(function() {
  const wrap = document.querySelector('.scg-{{ sid }}__wrap');
  if (!wrap) return;

  const tiles = Array.from(wrap.querySelectorAll('.scg-{{ sid }}__tile'));
  if (!tiles.length) return;

  let raf = null;

  function setActive(tile) {
    if (raf) cancelAnimationFrame(raf);
    raf = requestAnimationFrame(() => {
      wrap.classList.add('scg-is-hovering');
      tiles.forEach(t => t.classList.toggle('scg-is-active', t === tile));
    });
  }

  function clearActive() {
    if (raf) cancelAnimationFrame(raf);
    raf = requestAnimationFrame(() => {
      wrap.classList.remove('scg-is-hovering');
      tiles.forEach(t => t.classList.remove('scg-is-active'));
    });
  }

  tiles.forEach(tile => {
    tile.addEventListener('pointerenter', () => setActive(tile), { passive: true });
    tile.addEventListener('pointerleave', () => {
      // leave handled by wrap pointerleave for stability
    }, { passive: true });
  });

  wrap.addEventListener('pointerleave', clearActive, { passive: true });

  // Theme editor safety: rebind on section load
  document.addEventListener('shopify:section:load', (e) => {
    // nothing required here unless you want to fully re-init; this is usually enough since section reloads DOM
  });
})();
</script>
</section>

{% schema %}
{
  "name": "Shop color grid",
  "tag": "section",
  "settings": [
    { "type": "color", "id": "section_bg", "label": "Section background", "default": "#ffffff" },

    {
      "type": "range",
      "id": "max_width",
      "min": 900,
      "max": 2000,
      "step": 50,
      "unit": "px",
      "label": "Max width",
      "default": 1400
    },
    {
      "type": "range",
      "id": "outer_padding",
      "min": 0,
      "max": 140,
      "step": 4,
      "unit": "px",
      "label": "Outer padding",
      "default": 40
    },
    { "type": "range", "id": "gap", "min": 0, "max": 80, "step": 2, "unit": "px", "label": "Gap", "default": 40 },

    { "type": "range", "id": "columns", "min": 3, "max": 6, "step": 1, "label": "Columns", "default": 5 },
    {
      "type": "range",
      "id": "height_vh",
      "min": 60,
      "max": 140,
      "step": 5,
      "unit": "vh",
      "label": "Section height",
      "default": 100
    },

    {
      "type": "range",
      "id": "tile_h",
      "min": 280,
      "max": 900,
      "step": 10,
      "unit": "px",
      "label": "Tile height (desktop)",
      "default": 540
    },
    {
      "type": "range",
      "id": "tile_h_mobile",
      "min": 240,
      "max": 700,
      "step": 10,
      "unit": "px",
      "label": "Tile height (mobile)",
      "default": 420
    },

    {
      "type": "color",
      "id": "tile_bg",
      "label": "Tile background (shows only if image has transparency)",
      "default": "#ffffff"
    },

    {
      "type": "select",
      "id": "image_fit",
      "label": "Image fit",
      "default": "cover",
      "options": [
        { "value": "cover", "label": "Cover (fills tile)" },
        { "value": "contain", "label": "Contain (show full image)" }
      ]
    },
    {
      "type": "range",
      "id": "image_scale",
      "min": 100,
      "max": 160,
      "step": 1,
      "unit": "%",
      "label": "Zoom (scale)",
      "default": 100
    },
    {
      "type": "range",
      "id": "image_pos_x",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "label": "Image position X",
      "default": 50
    },
    {
      "type": "range",
      "id": "image_pos_y",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "label": "Image position Y",
      "default": 50
    },
    {
      "type": "range",
      "id": "hover_zoom",
      "min": 100,
      "max": 140,
      "step": 1,
      "unit": "%",
      "label": "Hover zoom",
      "default": 112
    },

    { "type": "range", "id": "radius", "min": 0, "max": 90, "step": 2, "unit": "px", "label": "Radius", "default": 26 },

    {
      "type": "range",
      "id": "overlay_opacity",
      "min": 0,
      "max": 80,
      "step": 1,
      "unit": "%",
      "label": "Overlay opacity",
      "default": 0
    },
    {
      "type": "range",
      "id": "overlay_hover_opacity",
      "min": 0,
      "max": 90,
      "step": 1,
      "unit": "%",
      "label": "Overlay hover opacity",
      "default": 15
    }
  ],
  "blocks": [
    {
      "type": "tile",
      "name": "Product tile",
      "settings": [
        { "type": "product", "id": "product", "label": "Product" },
        { "type": "image_picker", "id": "custom_image", "label": "Custom image" },
        { "type": "color", "id": "text_color", "label": "Hover text color", "default": "#ffffff" }
      ]
    }
  ],
  "max_blocks": 5,
  "presets": [{ "name": "Shop color grid" }]
}
{% endschema %}
