{% doc %}
  @prompt
    Create a full-width product carousel that displays 5 products across the entire page width. Each product card should have a background color that matches the product (green background for green dinosaur, pink for pink items, blue for blue items, etc.). Add smooth hover effects that slightly enlarge the product card and increase brightness when users hover over them. The product names and prices should be overlaid on the images in white text. Include smooth transitions and modern hover animations.
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-product-carousel-{{ ai_gen_id }} {
    display: block;
    width: 100%;
    overflow: hidden;
    padding: 40px 0;
  }

  .ai-product-carousel__wrapper-{{ ai_gen_id }} {
    display: flex;
    gap: 0;
    width: 100%;
  }

  .ai-product-carousel__card-{{ ai_gen_id }} {
    flex: 0 0 20%;
    position: relative;
    overflow: hidden;
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), filter 0.4s ease;
    cursor: pointer;
  }

  .ai-product-carousel__card-{{ ai_gen_id }}:hover {
    transform: scale(1.05);
    filter: brightness(1.15);
    z-index: 10;
  }

  .ai-product-carousel__link-{{ ai_gen_id }} {
    display: block;
    text-decoration: none;
    height: 100%;
  }

  .ai-product-carousel__image-wrapper-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    padding-bottom: 125%;
    overflow: hidden;
  }

  .ai-product-carousel__image-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .ai-product-carousel__overlay-{{ ai_gen_id }} {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 20px;
    background: linear-gradient(to top, rgba(0, 0, 0, 0.7), transparent);
    transition: background 0.3s ease;
  }

  .ai-product-carousel__card-{{ ai_gen_id }}:hover .ai-product-carousel__overlay-{{ ai_gen_id }} {
    background: linear-gradient(to top, rgba(0, 0, 0, 0.85), transparent);
  }

  .ai-product-carousel__title-{{ ai_gen_id }} {
    color: #ffffff;
    font-size: 16px;
    font-weight: 600;
    margin: 0 0 8px;
    line-height: 1.3;
  }

  .ai-product-carousel__price-{{ ai_gen_id }} {
    color: #ffffff;
    font-size: 18px;
    font-weight: 700;
    margin: 0;
  }

  .ai-product-carousel__placeholder-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    padding-bottom: 125%;
    background-color: #f4f4f4;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .ai-product-carousel__placeholder-{{ ai_gen_id }} svg {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 60%;
    height: 60%;
    opacity: 0.3;
  }

  .ai-product-carousel__empty-state-{{ ai_gen_id }} {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 12px 20px;
    font-size: 14px;
    color: #666;
    text-align: center;
    pointer-events: none;
    white-space: nowrap;
  }

  @media screen and (max-width: 989px) {
    .ai-product-carousel__card-{{ ai_gen_id }} {
      flex: 0 0 33.333%;
    }
  }

  @media screen and (max-width: 749px) {
    .ai-product-carousel__card-{{ ai_gen_id }} {
      flex: 0 0 50%;
    }

    .ai-product-carousel__title-{{ ai_gen_id }} {
      font-size: 14px;
    }

    .ai-product-carousel__price-{{ ai_gen_id }} {
      font-size: 16px;
    }

    .ai-product-carousel__overlay-{{ ai_gen_id }} {
      padding: 15px;
    }
  }
{% endstyle %}

<product-carousel-{{ ai_gen_id }} class="ai-product-carousel-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-product-carousel__wrapper-{{ ai_gen_id }}">
    {% for i in (1..5) %}
      {% liquid
        assign product_key = 'product_' | append: i
        assign bg_color_key = 'bg_color_' | append: i
        assign product = block.settings[product_key]
        assign bg_color = block.settings[bg_color_key]
      %}

      <div 
        class="ai-product-carousel__card-{{ ai_gen_id }}"
        style="background-color: {{ bg_color }};"
      >
        {% if product != blank %}
          <a href="{{ product.url }}" class="ai-product-carousel__link-{{ ai_gen_id }}">
            <div class="ai-product-carousel__image-wrapper-{{ ai_gen_id }}">
              {% if product.featured_image %}
                <img
                  src="{{ product.featured_image | image_url: width: 600 }}"
                  alt="{{ product.featured_image.alt | escape }}"
                  class="ai-product-carousel__image-{{ ai_gen_id }}"
                  loading="lazy"
                  width="600"
                  height="750"
                >
              {% endif %}
              <div class="ai-product-carousel__overlay-{{ ai_gen_id }}">
                <h3 class="ai-product-carousel__title-{{ ai_gen_id }}">{{ product.title }}</h3>
                <p class="ai-product-carousel__price-{{ ai_gen_id }}">{{ product.price | money }}</p>
              </div>
            </div>
          </a>
        {% else %}
          <div class="ai-product-carousel__placeholder-{{ ai_gen_id }}">
            {{ 'product-1' | placeholder_svg_tag }}
            <div class="ai-product-carousel__empty-state-{{ ai_gen_id }}">
              Add product {{ i }}
            </div>
          </div>
        {% endif %}
      </div>
    {% endfor %}
  </div>
</product-carousel-{{ ai_gen_id }}>

<script>
  (function() {
    class ProductCarousel{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
      }

      connectedCallback() {
        this.cards = this.querySelectorAll('.ai-product-carousel__card-{{ ai_gen_id }}');
        this.setupHoverEffects();
      }

      setupHoverEffects() {
        this.cards.forEach((card) => {
          card.addEventListener('mouseenter', () => {
            this.cards.forEach((otherCard) => {
              if (otherCard !== card) {
                otherCard.style.filter = 'brightness(0.85)';
              }
            });
          });

          card.addEventListener('mouseleave', () => {
            this.cards.forEach((otherCard) => {
              otherCard.style.filter = '';
            });
          });
        });
      }
    }

    customElements.define('product-carousel-{{ ai_gen_id }}', ProductCarousel{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Product carousel",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Product 1"
    },
    {
      "type": "product",
      "id": "product_1",
      "label": "Product"
    },
    {
      "type": "color",
      "id": "bg_color_1",
      "label": "Background color",
      "default": "#90EE90"
    },
    {
      "type": "header",
      "content": "Product 2"
    },
    {
      "type": "product",
      "id": "product_2",
      "label": "Product"
    },
    {
      "type": "color",
      "id": "bg_color_2",
      "label": "Background color",
      "default": "#FFB6C1"
    },
    {
      "type": "header",
      "content": "Product 3"
    },
    {
      "type": "product",
      "id": "product_3",
      "label": "Product"
    },
    {
      "type": "color",
      "id": "bg_color_3",
      "label": "Background color",
      "default": "#87CEEB"
    },
    {
      "type": "header",
      "content": "Product 4"
    },
    {
      "type": "product",
      "id": "product_4",
      "label": "Product"
    },
    {
      "type": "color",
      "id": "bg_color_4",
      "label": "Background color",
      "default": "#DDA0DD"
    },
    {
      "type": "header",
      "content": "Product 5"
    },
    {
      "type": "product",
      "id": "product_5",
      "label": "Product"
    },
    {
      "type": "color",
      "id": "bg_color_5",
      "label": "Background color",
      "default": "#F0E68C"
    }
  ],
  "presets": [
    {
      "name": "Product carousel"
    }
  ]
}
{% endschema %}
